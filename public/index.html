<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
    <title>akkosploits</title>

    <link rel="shortcut icon" href="favicon.webp" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;500&display=swap" rel="stylesheet">

    <script src="/scram/scramjet.all.js"></script>
    <script src="/baremux/index.js"></script>

    <link rel="stylesheet" href="index.css" />
    <script src="register-sw.js" defer></script>
    <script src="search.js" defer></script>
    <script src="index.js" defer></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            outline: none !important;
        }

        html, body {
            height: 100%;
            background: #000000;
            color: #ffffff;
            font-family: 'Oxanium', system-ui, sans-serif;
            overflow: hidden;
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        /* --- Settings Button --- */
        #open-settings-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1a1b1e; 
            color: #ffffff;
            border: none;
            border-radius: 9999px;
            padding: 0 24px;
            height: 52px;
            cursor: pointer;
            z-index: 100;
            font-family: inherit;
            transition: background 0.2s ease;
        }

        #open-settings-btn:hover {
            background: #2a2b2e; /* Lighter shade on hover */
        }

        /* --- Search Bar --- */
        #sj-address {
            width: 100%;
            max-width: 680px;
            height: 52px;
            padding: 0 24px;
            font-size: 1.18rem;
            background: #16171a; 
            color: #ffffff;
            border: none;
            border-radius: 9999px;
            text-align: center;
            font-family: inherit;
            transition: background 0.2s ease;
        }

        #sj-address:hover {
            background: #232429; /* Lighter shade on hover */
        }

        #sj-address:focus {
            background: #1c1d21;
        }

        /* --- Settings Panel Overlay --- */
        #settings-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.92);
            backdrop-filter: blur(12px);
            display: none;
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        #settings-panel {
            background: #0f0f0f;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            height: 70vh;
            display: flex;
            position: relative;
            overflow: hidden;
        }

        #close-settings {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            cursor: pointer;
            color: #666;
            z-index: 10;
        }

        .sidebar { width: 160px; background: #111; padding: 20px 0; border-right: 1px solid #222; }
        .sidebar-item { padding: 12px 20px; cursor: pointer; color: #555; transition: 0.2s; }
        .sidebar-item.active { color: #fff; background: #1a1a1a; }
        .content-area { flex: 1; padding: 30px; }

        .center-wrapper { text-align: center; width: 100%; max-width: 700px; margin-top: -10vh; }
        h1 { font-size: 4.5rem; margin-bottom: 2rem; font-weight: 300; letter-spacing: -1px; }

        /* --- Toggles & Buttons --- */
        .switch { position: relative; display: inline-block; width: 44px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; inset: 0; background: #333; border-radius: 20px; transition: .3s; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: .3s; }
        input:checked + .slider { background: #ff69b4; }
        input:checked + .slider:before { transform: translateX(22px); }

        .dark-gray-btn {
            background: #222; border: none; color: #fff;
            padding: 12px; width: 100%; border-radius: 10px; cursor: pointer;
            font-family: inherit; transition: 0.2s;
        }
        .dark-gray-btn:hover { background: #2a2a2a; }
    </style>
</head>

<body>
    <button id="open-settings-btn" onclick="openSettings()">settings</button>

    <div class="center-wrapper">
        <h1>akkosploits</h1>
        <form id="sj-form">
            <input id="sj-search-engine" value="https://www.google.com/search?q=%s" type="hidden" />
            <input id="sj-address" type="text" placeholder="search whatever you want here..." autofocus />
        </form>
    </div>

    <div id="settings-overlay">
        <div id="settings-panel">
            <span id="close-settings" onclick="closeSettings()">Ã—</span>
            <div class="sidebar">
                <div id="cloaking-tab" onclick="showTab('cloaking')" class="sidebar-item active">cloaking</div>
                <div id="about-tab" onclick="showTab('about')" class="sidebar-item">about</div>
            </div>
            <div class="content-area">
                <div id="cloaking-content">
                    <h2 style="margin-bottom: 20px;">Cloaking</h2>
                    <button onclick="ab_cloakReal()" class="dark-gray-btn">Open About:Blank</button>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top: 25px;">
                        <span>Auto-Cloak Page</span>
                        <label class="switch">
                            <input type="checkbox" id="auto-cloak-toggle" onchange="toggleAutoCloak()">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div id="about-content" style="display:none;">
                    <h2>About</h2>
                    <p style="margin-top:20px; color:#555;">v1.0 - akkosploits</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openSettings() { 
            document.getElementById('settings-overlay').style.display = 'flex'; 
        }
        function closeSettings() { 
            document.getElementById('settings-overlay').style.display = 'none'; 
        }

        // Logic to hide UI elements when a search is triggered
        document.getElementById('sj-form').addEventListener('submit', function() {
            closeSettings();
            // This hides the settings button when results load
            document.getElementById('open-settings-btn').style.display = 'none';
        });

        function showTab(tab) {
            document.getElementById('cloaking-content').style.display = tab === 'cloaking' ? 'block' : 'none';
            document.getElementById('about-content').style.display = tab === 'about' ? 'block' : 'none';
            document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active'));
            document.getElementById(tab + '-tab').classList.add('active');
        }

        function toggleAutoCloak() {
            localStorage.setItem('autoCloak', document.getElementById('auto-cloak-toggle').checked);
        }

        window.onload = () => {
            const saved = localStorage.getItem('autoCloak') === 'true';
            const toggle = document.getElementById('auto-cloak-toggle');
            if(toggle) toggle.checked = saved;
            if(saved) ab_cloakReal();
        };

        function ab_cloakReal() {
            const win = window.open('about:blank', '_blank');
            if (win) {
                const iframe = win.document.createElement('iframe');
                iframe.src = window.location.href;
                iframe.style = "margin:0;padding:0;border:none;width:100%;height:100%;overflow:hidden;";
                win.document.body.appendChild(iframe);
                win.document.body.style.margin = "0";
            }
        }
    </script>
</body>
</html>
